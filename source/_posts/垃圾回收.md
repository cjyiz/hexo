---
layout: post
title: 垃圾回收
date: 2020-02-17 16:46:44
tags:
---

# 什么是垃圾
 简单讲就是没有被引用的，或者是几个对象之间互相引用形成环。<!-- more -->

 # 如何回收
 离开作用域的值将被自动标记为可以回收，因此将在垃圾收集期间被删除。
 1、标记清除
   浏览器大多数采用这种方式：当变量进入环境时，将变量标记'进入环境',当变量离开环境时，标记为：'离开环境'。某一个时刻，垃圾回收器会过滤掉环境中的变量，以及被环境变量引用的变量，剩下的就是被视为准备回收的变量。

 2、引用计数
 跟踪记录每个值被引用的次数。当声明了一个变量并将一个引用类型赋值给该变量时，则整个值的引用次数为1。相反，如果包含怼整个值引用的变量又取得了另外一个值，则这个值的引用次数减1。当这个引用次数变成0时，则说明没有办法再访问这个值，因而就可以将其所占的内存空间给收回来。

 但是该处理方案存在因为循环引用导致内存无法释放的问题，需要手动释放，因此大多数浏览器已经放弃了这种回收方式。

 3、什么时候触发垃圾回收
 一般浏览器会自动触发，一次回收耗时约100ms左右。


 4、chrome的垃圾回收优化